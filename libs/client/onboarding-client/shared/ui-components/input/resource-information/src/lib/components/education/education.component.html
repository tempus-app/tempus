<ng-container>
	<div fxLayout="column">
		<div fxFlex>
			<div fxFlex="5"></div>
			<div class="info-title">
				<h2 class="mat-h2">Education and Training</h2>
			</div>
			<div>
				<button
					mat-mini-fab
					(click)="addEducationSections()"
					matTooltip="Add more education sections"
					class="header-button"
					color="primary"
				>
					<mat-icon>add</mat-icon>
				</button>
			</div>
			<div fxFlex="5"></div>
		</div>

		<div fxFlex>
			<div fxFlex="5"></div>
			<tempus-card>
				<form>
					<h3 class="mat-h3" color="primary">Education Summary</h3>
					<tempus-text-area
						id="education-summary"
						placeholder="Summary"
						[control]="$any(myInfoForm).get('educationSummary')"
					></tempus-text-area>
				</form>
			</tempus-card>
			<div fxFlex="5"></div>
		</div>

		<div *ngFor="let numEducation of qualifications.controls; let index = index">
			<div fxFlex="5"></div>
			<tempus-card>
				<form>
					<div class="card-header">
						<div class="header-button">
							<button
								mat-mini-fab
								(click)="removeEducationSection(index)"
								matTooltip="Remove education section"
								color="primary"
							>
								<mat-icon>remove</mat-icon>
							</button>
						</div>
						<div>
							<h3 class="mat-h3" color="primary">Qualification {{ index + 1 }}</h3>
						</div>
					</div>

					<div fxLayout="column" fxLayoutGap="10px">
						<div fxLayout.gt-sm="row" fxLayout.lt-md="column" fxLayoutGap="10px" fxFlex="33%" class="block-2">
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="start center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<tempus-text-input
									id="institution-{{ index }}"
									placeholder="Institution *"
									cssClass="secondary"
									[control]="$any(numEducation).get('institution')"
								>
								</tempus-text-input>
							</div>
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="end center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<tempus-text-input
									id="field-{{ index }}"
									placeholder="Field *"
									cssClass="secondary"
									[control]="$any(numEducation).get('field')"
								></tempus-text-input>
							</div>
						</div>

						<div fxLayout.gt-sm="row" fxLayout.lt-md="column">
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="start center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<div class="error-container">
									<mat-error
										class="mat-body-2"
										*ngIf="
											$any(numEducation).get('institution').invalid &&
											($any(numEducation).get('institution').touched || $any(numEducation).get('institution').dirty)
										"
									>
										Please enter an institution name.
									</mat-error>
								</div>
							</div>
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="end center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<div class="error-container">
									<mat-error
										class="mat-body-2"
										*ngIf="
											$any(numEducation).get('field').invalid &&
											($any(numEducation).get('field').touched || $any(numEducation).get('field').dirty)
										"
									>
										Please enter a qualification field.
									</mat-error>
								</div>
							</div>
						</div>

						<div fxLayout.gt-sm="row" fxLayout.lt-md="column" fxLayoutGap="10px" fxFlex="33%" class="block-2">
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="33%"
								fxLayoutAlign="start center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<tempus-search-box
									id="country-{{ index }}"
									[options]="countries"
									placeholder="Country"
									cssClass="secondary"
									(optionSelect)="updateStateOptions($event)"
									[control]="$any(numEducation).get('country')"
								></tempus-search-box>
							</div>
							<div fxFlex.gt-sm="50%" fxFlex.lt-md="33%" fxLayoutAlign="center center" fxFlexFill class="grid-item">
								<tempus-dropdown
									id="state-{{ index }}"
									[options]="states"
									label="State"
									cssClass="secondary"
									[control]="$any(numEducation).get('state')"
								>
								</tempus-dropdown>
							</div>
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="33%"
								fxLayoutAlign="end center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<tempus-text-input
									id="city-{{ index }}"
									placeholder="City"
									cssClass="secondary"
									[control]="$any(numEducation).get('city')"
								></tempus-text-input>
							</div>
						</div>

						<div fxLayout.gt-sm="row" fxLayout.lt-md="column" fxLayoutGap="10px" fxFlex="33%" class="block-2">
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="start center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<tempus-text-input
									id="start-date-{{ index }}"
									[inputType]="InputType.DATE"
									placeholder="Start date"
									cssClass="secondary"
									[control]="$any(numEducation).get('startDate')"
								></tempus-text-input>
							</div>
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="end center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<tempus-text-input
									id="end-date-{{ index }}"
									[inputType]="InputType.DATE"
									placeholder="End date"
									cssClass="secondary"
									[control]="$any(numEducation).get('endDate')"
								></tempus-text-input>
							</div>
						</div>

						<div fxLayout.gt-sm="row" fxLayout.lt-md="column">
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="start center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<div class="error-container">
									<mat-error
										class="mat-body-2"
										*ngIf="
											$any(numEducation).get('startDate').invalid &&
											($any(numEducation).get('startDate').touched || $any(numEducation).get('startDate').dirty)
										"
									>
										Please enter a valid start date.
									</mat-error>
								</div>
							</div>
							<div
								fxFlex.gt-sm="50%"
								fxFlex.lt-md="50%"
								fxLayoutAlign="end center"
								fxLayoutAlign.lt-md="center center"
								fxFlexFill
								class="grid-item"
							>
								<div class="error-container">
									<mat-error
										class="mat-body-2"
										*ngIf="
											$any(numEducation).get('endDate').invalid &&
											($any(numEducation).get('endDate').touched || $any(numEducation).get('endDate').dirty)
										"
									>
										Please enter a valid end date.
									</mat-error>
								</div>
							</div>
						</div>
						<div>
							<mat-error class="mat-body-2" *ngIf="$any(numEducation).errors?.['dateError']">
								Please make sure the start date is before the end date.
							</mat-error>
						</div>
					</div>
				</form>
			</tempus-card>
			<div fxFlex="5"></div>
		</div>
	</div>
</ng-container>
